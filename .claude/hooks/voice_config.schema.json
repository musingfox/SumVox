{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Voice Notification Configuration",
  "description": "Configuration schema for Claude Code Voice Notification Hook",
  "type": "object",
  "required": ["version", "enabled", "llm", "voice"],
  "properties": {
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Configuration version in semver format"
    },
    "enabled": {
      "type": "boolean",
      "description": "Enable or disable voice notifications globally"
    },
    "llm": {
      "type": "object",
      "required": ["provider", "models"],
      "properties": {
        "provider": {
          "type": "string",
          "enum": ["gemini", "anthropic", "openai", "ollama"],
          "description": "Primary LLM provider"
        },
        "models": {
          "type": "object",
          "required": ["primary"],
          "properties": {
            "primary": {
              "type": "string",
              "description": "Primary model to use"
            },
            "fallback": {
              "type": "string",
              "description": "Fallback model if primary fails"
            },
            "local": {
              "type": "string",
              "description": "Local model (e.g., Ollama)"
            }
          }
        },
        "api_keys": {
          "type": "object",
          "description": "API keys for various providers (use env var placeholders)"
        },
        "parameters": {
          "type": "object",
          "properties": {
            "max_tokens": {
              "type": "integer",
              "minimum": 10,
              "maximum": 500,
              "description": "Maximum tokens for summary generation"
            },
            "temperature": {
              "type": "number",
              "minimum": 0,
              "maximum": 2,
              "description": "Temperature for LLM generation"
            },
            "timeout": {
              "type": "integer",
              "minimum": 1,
              "maximum": 60,
              "description": "API request timeout in seconds"
            }
          }
        },
        "cost_control": {
          "type": "object",
          "properties": {
            "daily_limit_usd": {
              "type": "number",
              "minimum": 0,
              "description": "Daily spending limit in USD"
            },
            "usage_tracking": {
              "type": "boolean",
              "description": "Enable usage tracking"
            },
            "usage_file": {
              "type": "string",
              "description": "Path to usage tracking file"
            }
          }
        }
      }
    },
    "voice": {
      "type": "object",
      "required": ["voice_name", "rate"],
      "properties": {
        "engine": {
          "type": "string",
          "enum": ["macos_say"],
          "description": "Voice engine to use"
        },
        "voice_name": {
          "type": "string",
          "enum": ["Ting-Ting", "Mei-Jia", "Sin-ji"],
          "description": "macOS voice name (Traditional Chinese)"
        },
        "rate": {
          "type": "integer",
          "minimum": 90,
          "maximum": 300,
          "description": "Speech rate in words per minute"
        },
        "volume": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "description": "Volume percentage"
        },
        "max_summary_length": {
          "type": "integer",
          "minimum": 10,
          "maximum": 200,
          "description": "Maximum summary length in characters"
        },
        "async": {
          "type": "boolean",
          "description": "Run voice playback asynchronously"
        }
      }
    },
    "triggers": {
      "type": "object",
      "properties": {
        "on_completion": {
          "type": "boolean",
          "description": "Trigger on task completion"
        },
        "on_error": {
          "type": "boolean",
          "description": "Trigger on error detection"
        },
        "min_duration_seconds": {
          "type": "integer",
          "minimum": 0,
          "description": "Minimum task duration to trigger notification"
        },
        "error_keywords": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Keywords to detect errors"
        }
      }
    },
    "summarization": {
      "type": "object",
      "properties": {
        "language": {
          "type": "string",
          "description": "Summary language code"
        },
        "format": {
          "type": "string",
          "enum": ["concise", "detailed", "minimal"],
          "description": "Summary format style"
        },
        "include": {
          "type": "object",
          "properties": {
            "operation_type": {"type": "boolean"},
            "result_status": {"type": "boolean"},
            "key_data": {"type": "boolean"},
            "next_steps": {"type": "boolean"}
          }
        },
        "prompt_template": {
          "type": "string",
          "description": "Template for AI summarization prompt"
        }
      }
    },
    "logging": {
      "type": "object",
      "properties": {
        "enabled": {"type": "boolean"},
        "log_file": {"type": "string"},
        "log_level": {
          "type": "string",
          "enum": ["DEBUG", "INFO", "WARNING", "ERROR"]
        },
        "rotate": {"type": "boolean"},
        "max_size_mb": {"type": "integer", "minimum": 1}
      }
    },
    "advanced": {
      "type": "object",
      "properties": {
        "cache_summaries": {"type": "boolean"},
        "cache_ttl_seconds": {"type": "integer", "minimum": 0},
        "retry_attempts": {"type": "integer", "minimum": 0, "maximum": 10},
        "fallback_message": {"type": "string"}
      }
    }
  }
}
